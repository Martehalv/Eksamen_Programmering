<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eksamen, oppgave 2</title>
    <link href="exam2.css" rel="stylesheet" media="all">
</head>
<body class="lato-regular">
    <main>
        <section id="contacts">
            <h2>Kontakter</h2>
            <div id="contactlist"></div>
        </section>
        <aside id="clock"></aside> 
        <section id="books">
            <h2>Regnskap</h2>
            <p>Innkommende egenkapital: Kr. <span id="incomingequity"></span></p>
            <section id="book">
                <h3>Bokføring, november</h3>
                <div id="bookhead" class="bookline">
                    <span class="booktext">Kvittering</span>
                    <span class="bookdate">Dato</span>
                    <span class="bookamount">Sum</span>
                </div>
                <div id="booklines">
                    <!-- Skal genereres fra datakilde i <script>. Oppføringen under er for å vise HTML-strukturen -->
                </div>
            </section>
            <p>Balanse november: Kr. <span id="balance">-</span></p>
            <p>Egenkapital: Kr. <span id="equity">-</span></p>
        </section>
        <section id="todoform">
            <h2>Ny oppgave</h2>
            <p>
                <label for="task">Oppgavetekst:</label><br />
                <input type="text" id="task" />
                <button id="savetask">Lagre</button></p>
        </section>
        <section id="todos">
            <h2>Oppgaver</h2>
            <ul id="todolist">
               
        </section>
        <footer><p>Adminpanel IPv1.0</p></footer>
    </main>

    <script>
        //CONTACTS
        const contacts = [
            {lastname: "Hansen", firstname: "Stine", office: "D2", mail: "s.hansen@company.com"},
            {lastname: "Andersen", firstname: "Willy", office: "D1", mail: "w.andersen@company.com"},
            {lastname: "Danilo", firstname: "Luciano", office: "E2", mail: "l.danilo@company.com"},
            {lastname: "Wester", firstname: "Zato", office: "C3", mail: "z.wester@company.com"},
            {lastname: "Jansson", firstname: "Sigried", office: "B1", mail: "s.jansson@company.com"}
        ]

        //ALFABETISK REKKEFØLGE
        //Laget en funkjson som går igjennom contacts arrayen. Denne sammenligner kontaktene (a,b). 
        contacts.sort(function (a, b) {
            if(a.lastname < b.lastname) {  //Etternavnet a kommer alfabetisk før etternavnet b så skal det returneres -1 for at a kommer før b.
                return -1;
            }
            if(a.lastname > b.lastname) {  //Etternavnet a kommer alfabetisk etter etternavnet b så skal det returneres 1 for at b kommer før a.
                return 1;
            }
            return 0;  //Returnerer 0 fordi ingen videre endringer skal skje.
        })

        let contactlist = ""

        //MAILTO
        /*Under contacts.map har jeg lagt inn mailto protokollen, 
        fordi .map gjør så vi går igjennom hele arrayen. Dermed får vi med oss hver 
        enkel mail, og kan deretter bruke mailto protkollen her for å få med oss alle
        mailene (${contact.mail}*/
        contacts.map((contact, index) => {
            contactlist += `<article>
                <p>
                    <strong>${contact.lastname}, ${contact.firstname}</strong><br />
                    Kontor: ${contact.office} | 
                    E-post: <a href="mailto:${contact.mail}">${contact.mail}</a> 
                </p>
            </article>`
        })

        document.getElementById("contactlist").innerHTML = contactlist
        
        //BOOKS
        const books = [
            {text: "Printerblekk", date: "02.11.24", amount: -750},
            {text: "Printerpapir", date: "02.11.24", amount: -439},
            {text: "Nettbutikksalg, uke 44", date: "06.11.24", amount: 3428},
            {text: "Produksjonsmateriale", date: "07.11.24", amount: -1299},
            {text: "Kontorrekvisita", date: "10.11.24", amount: -644},
            {text: "Nettbutikksalg, uke 45", date: "13.11.24", amount: 2988}
        ]

        let equity = 23782; //Penger på konto ved inngangen til november
        document.getElementById("incomingequity").innerHTML = equity
        let balance = 0;    //Startbalanse for utregning av utgifter og inntekter i november


        //TODOS      Kilder er skrevet i egen word fil i mappen

        //Først fjernet jeg det som var tidligere i html'en, deretter lagde jeg et nytt navn til arrayen under (data)
        let data = [
            {text: "Les eksamensteksten", status: "Done"},
            {text: "Løs Innføring i programmerings-eksamen", status: "To do"},
            {text: "Lag funksjonalitet for å registrere nye oppgaver", status: "To do"},
            {text: "Lag funksjonalitet for å sette en eksisterende oppgave til utført ved å endre status", status: "To do"}
        ]

        //Her har jeg koblet til id'ene i html'en. Id for section og list.
        let section = document.getElementById("todos");
        let list = document.getElementById("todolist");

        //Lagde en for loop for at den skal gå igjennom hver del i arrayen.
        for (i = 0; i < data.length; i++) {
        let li = document.createElement('li'); //Denne lager en <li> for hver del ved bruk av createElement("li").
        
        //Lagd en <span> for "text" i arrayen. 
        let firstSpan = document.createElement("span"); 
        firstSpan.innerText = data[i].text;
        
        //Lagd en annen <span> for "status" i arrayen. 
        let secondSpan = document.createElement("span");
        secondSpan.innerText = data[i].status;
        
        //En if, else if, for å få riktige knapper i forhold til "status" i arrayet (Done eller To do). Koblet til clas'ene i css'en.
        if (data[i].status === "Done") {
            secondSpan.classList.add("task-status", "task-status-done");
        } else if (data[i].status === "To do") {
            secondSpan.classList.add("task-status", "task-status-todo");
        }
        
        //Her legger jeg til <span> elementene i <li> elementet.
        li.appendChild(firstSpan);
        li.appendChild(secondSpan);
        
        //Her legger jeg til <li> elementene i listen.
        list.appendChild(li);
        }
        //Her legger jeg til listen i <section>.
        section.appendChild(list);

        
        //CLOCK
        /*Kilden jeg har fulgt er : https://codepen.io/afarrar/pen/JRaEjP
        Den er på engelsk, og tar for seg AM og PM. Dette tok jeg ikke med i koden min.*/

        // Starta med å lage en function.
        function clockTime() {

            //Her henter de inn timer, minutter og sekunder
            var date = new Date();
            var h = date.getHours();
            var m = date.getMinutes();
            var s = date.getSeconds();

            //If er for å ha en 24 timers klokke (et døgn), slik at den starter på 0 igjen etter den har gått i 24 timer.
            if (h == 0) {
                h = 24;
            }

            //Denne skal være med på å legge til en 0 hvis tallene i klokken er mindre enn 10. Dette er for mer oversikt.
            h = (h < 10) ? "0" + h : h;
            m = (m < 10) ? "0" + m : m;
            s = (s < 10) ? "0" + s : s;

            //Her er variabel som viser hvordan klokka ser ut.
            var time = h + ":" + m + ":" + s;

            //Disse skal til for å oppdatere klokken vår i html'en
            document.getElementById("clock").innerText = time;
            document.getElementById("clock").textContent = time;
        
            //Denne starter clockTime igjen etter 1 sekund, dette gjør så klokken oppdaterer seg hvert sekund.
            setTimeout(clockTime, 1000);
        }

        //Starter function
        clockTime();
        
    </script>
</body>
</html>